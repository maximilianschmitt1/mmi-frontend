<header class="page-header">
  <h1>Meine Habits</h1>
  <nav>
    <create-habit on-create="hideCreateHabitForm(); reload()" ng-if="createHabit"></create-habit>
    <button ng-if="!createHabit" ng-click="showCreateHabitForm()" class="primary">Neuer Habit</button>
  </nav>
</header>
<section class="page-body">
  <ul ng-if="habits.length" class="habit-list">
    <li ng-repeat="habit in habits" ng-class="{ 'habit-list-item': true, toggled: isToggled(habit) }">
      <div ng-click="toggleDetails(habit)" class="habit-overview">
        <div class="level">{{habit.level.value}}</div>
        <div class="habit-name">
          <h2>{{habit.name}}</h2>
        </div>
        <nav>
          <span ng-if="habit.today" class="activity-{{habit.today.type}}">
            {{habit.today === 'success' ? 'Du hast das Tagesziel geschafft!' : 'Du hast das Tagesziel heute verfehlt. Morgen hast du wieder eine Chance!'}}
          </span>
          <button ng-if="!habit.today" ng-click="succeed(habit); $event.stopPropagation()" class="primary">Tagesziel erreicht</button>
          <button ng-if="!habit.today" ng-click="fail(habit); $event.stopPropagation()">verfehlt</button>
        </nav>
      </div>
      <div ng-if="isToggled(habit)" class="habit-details">
        <p>Du arbeitest seit {{habit.daysSince}} Tagen an diesem Habit.</p>
        <div class="streak-box">
          <div ng-repeat="day in habit.days track by $index" class="day {{day.type}} {{day.isToday ? 'today' : ''}}"></div>
        </div>
      </div>
    </li>
  </ul>
  <div ng-if="!habits.length" class="empty-list">
    <p>Du hast noch keine Habits angelegt.</p>
  </div>
</section>